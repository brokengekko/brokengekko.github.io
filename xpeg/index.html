<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Creative Image Upscaler</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 40px;
        background-color: #f8f9fa;
    }
    h1 {
        font-size: 2.5em;
        margin-bottom: 20px;
    }
    input[type="file"], input[type="text"], input[type="number"] {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
        width: 300px;
        margin-bottom: 15px;
    }
    button {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 1em;
    }
    button:hover {
        background-color: #0056b3;
    }
    #output {
        margin-top: 20px;
    }
    #output img {
        max-width: 100%;
        border: 1px solid #ccc;
        border-radius: 6px;
        margin-top: 10px;
    }
    #passcode-screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 80vh;
    }
    #app {
        display: none;
    }
</style>
</head>
<body>

<div id="passcode-screen">
    <h1>Enter Passcode</h1>
    <input type="password" id="passcode" placeholder="Passcode">
    <button onclick="checkPasscode()">Enter</button>
</div>

<div id="app">
    <h1>Creative Image Upscaler</h1>
    <label>Upload image:</label><br>
    <input type="file" id="imageUpload"><br><br>
    
    <label>Prompt (optional):</label><br>
    <input type="text" id="prompt" placeholder="Describe changes"><br><br>
    
    <label>Creativity (0.0 - 1.0):</label><br>
    <input type="number" id="creativity" min="0" max="1" step="0.1" value="0.2"><br><br>
    
    <button onclick="upscaleImage()">Upscale</button>
    
    <div id="output"></div>
</div>

<script>
const BACKEND_URL = "https://image-upscaler-backend.onrender.com/upscale"; // change to your Render URL

function checkPasscode() {
    const entered = document.getElementById("passcode").value;
    const correct = "9" + ((5*5)/25) + String.fromCharCode(49) + '0'; // change to your real passcode
    if (entered === correct) {
        document.getElementById("passcode-screen").style.display = "none";
        document.getElementById("app").style.display = "block";
    } else {
        alert("Incorrect passcode");
    }
}

async function upscaleImage() {
    const fileInput = document.getElementById("imageUpload");
    if (!fileInput.files.length) {
        alert("Please upload an image");
        return;
    }
    
    const formData = new FormData();
    formData.append("image", fileInput.files[0]);
    formData.append("prompt", document.getElementById("prompt").value);
    formData.append("creativity", document.getElementById("creativity").value);
    
    document.getElementById("output").innerHTML = "Processing...";
    
    try {
        const response = await fetch(BACKEND_URL, {
            method: "POST",
            body: formData
        });
        
        if (!response.ok) throw new Error("API request failed");
        
        const blob = await response.blob();
        const imgURL = URL.createObjectURL(blob);
        document.getElementById("output").innerHTML = `<img src="${imgURL}" alt="Upscaled Image">`;
        
    } catch (err) {
        console.error(err);
        document.getElementById("output").innerHTML = "Error processing image.";
    }
}
</script>

</body>
</html>
